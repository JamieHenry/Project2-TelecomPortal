<aside *ngIf="showAddNewDeviceModal">
    <header>
        <img src="../../assets/images/apple-logo.png" *ngIf="'Apple' === 'Apple'">
        <!-- <img src="../../assets/images/blackberry-logo.png" *ngIf="device.device.make === 'BlackBerry'">
        <img src="../../assets/images/samsung-logo.png" *ngIf="device.device.make === 'Samsung'">
        <img src="../../assets/images/other-logo.png" *ngIf="device.device.make !== 'Apple' 
                                                        && device.device.make !== 'BlackBerry' 
                                                        && device.device.make !== 'Samsung'"> -->
        <h5><!--{{ device.device.model }}-->Device Model</h5>
        <select #lines (change)="onAvailableLineSelected(lines.value)">
            <option value="">Select an active line...</option>
            <ng-container *ngFor="let line of availableLines, let i = index">
                <option value="{{ i }}">{{ line.phoneNumber }}</option>
            </ng-container>
        </select>
        <p>Are you sure you want to add this device?</p>
        <button (click)="addNewDevice()">Add Device</button>
        <button (click)="cancelAddNewDevice()">Cancel</button>
        <div style="color: red;">{{ addLineError }}</div>
    </header>
    <div (click)="cancelAddNewDevice()"></div>
</aside>

<main>
    <h1>Manage Devices</h1>
    <article>
        <h2 *ngIf="this.availableLines.length!==0">My Devices</h2>
        <ng-container *ngFor="let number of currentNumbers">
            <app-current-device
                [number]="number"
                [availableLines]="availableLines"
                (changeEvent)="resetValues()"></app-current-device>
        </ng-container>

        <h2>Available Devices
            <form id="selectAvailableMake">
                <select name="availableMake" #makes (change)="onDeviceFilterSelected(makes.value)">
                    <option value="">Select Make...</option>
                    <ng-container *ngFor="let make of currMakes">
                        <option value="{{ make }}">{{ make }}</option>
                    </ng-container>
                </select>
            </form>
            <form id="searchAvailableMake">
                <input type="text" placeholder="Search Available Devices...">
                <input type="submit" value="">
            </form>
            <a [routerLink]="['/manageDevices']">Scroll for more options â–¼</a>
        </h2>
        <div>
        <ng-container *ngFor="let device of filteredDevices">
            <app-available-device
                [device]="device"
                [availableLines]="availableLines"
                (changeEvent)="resetValues()"></app-available-device>
        </ng-container>
        </div>
        
        <h2>Add Device</h2>

        <form id="addDevice" [formGroup]="addDeviceForm">

            <section>
                <label for="make">Make</label>
                <input name="make" type="text" formControlName="make"  />
                <aside>
                    <span *ngIf="addDeviceForm.controls['make'] != null 
                                 && !addDeviceForm.controls['make'].valid 
                                 && (addDeviceForm.controls['make'].dirty 
                                 || addDeviceForm.controls['make'].touched)">
                        Required
                    </span>
                </aside>
            </section>
            
            <section>
                <label for="model">Model</label>
                <input name="model" type="text" formControlName="model" />
                <aside>
                    <span *ngIf="addDeviceForm.controls['model'] != null 
                                 && !addDeviceForm.controls['model'].valid 
                                 && (addDeviceForm.controls['model'].dirty 
                                 || addDeviceForm.controls['model'].touched)">
                        Required
                    </span>
                </aside>
            </section>
            <button [disabled]="!addDeviceForm.valid" (click)="addNewDeviceModal()">Add New Device</button>
            <aside>
                <span style="color: red;">{{ addDeviceError }}</span>
            </aside>
        </form>
    </article>

    <app-sidebar
        [isStale]="isStale"></app-sidebar>
</main>